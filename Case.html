<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ö–µ–π—Å ‚Äî Kris‚Äôs case lab</title>
<link rel="stylesheet" href="styles.css">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="menu.js" defer></script>
<script src="main.js" defer></script>
</head>
<body>
<header class="site-header">
  <div class="header-inner">
    <div class="logo">Kris‚Äôs case lab</div>
    <nav id="mainNav" class="main-nav">
      <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="cases.html">–ö–µ–π—Å—ã</a>
      <a href="projects.html">–ü—Ä–æ–µ–∫—Ç—ã</a>
      <a href="collections.html">–°–±–æ—Ä–Ω–∏–∫–∏</a>
    </nav>
    <div class="nav-controls">
      <button id="themeToggle" class="theme-btn">üåì</button>
      <button class="burger" onclick="toggleMenu()">‚ò∞</button>
    </div>
  </div>
</header>

<main style="max-width:1100px;margin:40px auto;padding:0 18px;">
  <div id="hero" class="card" style="position:relative;">
    <!-- hero content will be injected -->
  </div>

  <div id="sections" style="margin-top:24px; display:flex; flex-direction:column; gap:18px;">
    <!-- instruction steps injected -->
  </div>

  <div style="margin-top:28px;">
    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h3>
    <div id="results" class="card"></div>
  </div>
</main>

<footer class="site-footer"><div class="footer-inner"><div>¬© 2025 Kris‚Äôs case lab</div></div></footer>

<script>
(async ()=>{
  const params = new URLSearchParams(location.search);
  const file = params.get('file') || 'example.md';
  const md = await loadMD('content/cases/'+file);

  // –ü—Ä–æ—Å—Ç–µ–π—à–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞: –æ–∂–∏–¥–∞–µ–º, —á—Ç–æ –≤ markdown –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–∏ H2 –¥–ª—è —Ä–∞–∑–¥–µ–ª–æ–≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.
  // –ú—ã –≤—ã–≤–µ–¥–µ–º hero ‚Äî –¥–æ –ø–µ—Ä–≤–æ–≥–æ H2, –∑–∞—Ç–µ–º –∫–∞–∂–¥—É—é —Å–µ–∫—Ü–∏—é H2+ –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ.
  // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ–º –ø–æ –º–∞—Ä–∫–¥–∞—É–Ω–∞–º: –Ω–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –ø–µ—Ä–≤–æ–≥–æ "## "
  const raw = await fetch('content/cases/'+file).then(r=>r.text());
  const idx = raw.search(/^##\s/m);
  const heroMd = idx===-1? raw : raw.slice(0, idx);
  const rest = idx===-1? '' : raw.slice(idx);

  document.getElementById('hero').innerHTML = marked.parse(heroMd);

  if(rest){
    // —Ä–∞–∑–±–∏–≤–∞–µ–º –ø–æ H2
    const sections = rest.split(/\n(?=##\s)/);
    const container = document.getElementById('sections');
    sections.forEach((s, i)=>{
      const el = document.createElement('div');
      el.className='card';
      el.innerHTML = marked.parse(s);
      // add arrow to next
      if(i < sections.length-1){
        const arrow = document.createElement('button');
        arrow.textContent = '–î–∞–ª—å—à–µ ‚Üí';
        arrow.style.cssText='position:absolute;right:12px;bottom:12px;';
        arrow.onclick = ()=> {
          const next = container.children[i+1];
          next.scrollIntoView({behavior:'smooth', block:'center'});
        };
        // wrap to position arrow inside
        el.style.position='relative';
        el.appendChild(arrow);
      }
      container.appendChild(el);
    });
  }
})();
</script>
</body>
</html>
